<!DOCTYPE html>
<html>
<!-- Viewport för att göra så att man inte kan zooma på mobil enhet -->
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
 <meta charset="utf-8">
<link rel="stylesheet" type="text/css" href="main.css">
<head>
	<title>hejsan hoppsan</title>
</head>
<script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.7.4.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<body>
		<div class="container">		
			<!--<div class="navbar"> <p>Frågor</p></div>
			<div class="quiz"><p>Bilder</p></div>-->
			<div id="canvas"></div>
			<!--<div class="help"><p>Nånting</p></div>-->
			 <script defer="defer">
			        //Skapar stagen
			        //Container: Bestämmer vart canvasen ska lägga sig
			        //Width: Storlek på stagen
			        //Height: Höjd på stagen
			        var w = $(".container").width()
			        var h = $(".container").height()
			        var stage = new Kinetic.Stage({
			          container: "canvas",
			          width: w,
			          height: h
			        });

			        //Skapar ett lager till stagen
			        var layer = new Kinetic.Layer();

			        //Lägger till lagret i stagen
			        stage.add(layer);
			        
			        //Skapar cirkelobjektet 
			        //x: bestämmer startposition i x
			        //y: bestämmer startposition i y
			        //Radius: bestämmer radien
			        //Fill: bestämmer innerfärgen
			        //Stroke: bestämmer randfärgen
			        //Strokewidth: randstorlek
			        //draggable: true/false
			        //dragbounds: Vart man får dra den
			        var circle = new Kinetic.Circle({
			        	x: stage.getWidth() /2,
			        	y: stage.getHeight() /2,
			        	radius: 20,
			        	fill: 'red',
			        	stroke: 'black',
			        	strokeWidth: 4,
			        	draggable: true,
			        	dragbounds: {
			        		left: stage.getWidth(), right: stage.getHeight()
			        	}
			        });

			         var circle2 = new Kinetic.Circle({
			        	x: w /4,
			        	y: h /4,
			        	radius: 10,
			        	fill: 'red',
			        	stroke: 'black',
			        	strokeWidth: 4,
			        	draggable: false,
			        	dragbounds: {
			        		left: stage.getWidth(), right: stage.getHeight()
			        	}
			        });

			        var line = new Kinetic.Line({ 
			            stroke: 'red',
					    strokeWidth: 1,
					});

			        var imageObj = new Image();
			        imageObj.onload = function() {
				        var yoda = new Kinetic.Image({
				          x: 39,
				          y: 552,
				          image: imageObj,
				          width: 106,
				          height: 118,
				         
				        });

				         var simpleText = new Kinetic.Text({
					        x: 153,
					        y: 627,
					        text: 'hejhjejej',
					        fontSize: 30,
					        fontFamily: 'Calibri',
					        fill: 'green'
					       
					      });
			        
			     //Kollar position när man slutar dra
			     //Skriver ut positionen i x/y-led
			     //Sätter punkterna linjen ska gå emellan
			     //lägger till linjen och cirkeln till lagret och ritar om
			     circle.on('dragend', function() {
			        //alert(circle.getPosition().x);
			       // alert(circle.getPosition().y);
			        circle.setDraggable(false)
			  		line.setPoints([circle2.getPosition().x, circle2.getPosition().y, circle.getPosition().x, circle.getPosition().y]);

			  		layer.add(line);
			        layer.add(circle2);
			        layer.draw();
			        //setInterval(function(){window.location="http://www.carlenglund.se/atlas"},3000);
			        //alert(simpleText.getPosition().x);
			        //alert(simpleText.getPosition().y);

     			 });

			     //Lägger till cirkeln till lagret och sedan lägger lagret i stagen
			      layer.add(simpleText);
			      
			      layer.add(yoda);
			      layer.add(circle);
			      stage.add(layer);
			  };
			        imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/yoda.jpg';

			    </script>
			
		</div>


	</body>
</html>

<!--<script>$('#lol').draggable();</script>-->


